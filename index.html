<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Nohttp by yanzhenjie</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Nohttp</h1>
      <h2 class="project-tagline">NoHttp support large files, file upload, download, automatically maintain a Cookie, asynchronous/synchronous request, a variety of Http caching pattern, redirect, 302/303 support proxy server.</h2>
      <a href="https://github.com/yanzhenjie/NoHttp" class="btn">View on GitHub</a>
      <a href="https://github.com/yanzhenjie/NoHttp/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/yanzhenjie/NoHttp/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="nohttp" class="anchor" href="#nohttp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NoHttp</h1>

<blockquote>
<p>NoHttp, feeling spill（NoHttp，情怀四溢）.</p>
</blockquote>

<p><img src="http://www.nohttp.net/image/nohttp_logo.svg" alt="NoHttp Logo"></p>

<p><a href="https://github.com/yanzhenjie/NoHttp/blob/master/README-cn.md"><strong>中文版文档</strong></a>  </p>

<p>The author's url: <a href="http://www.yanzhenjie.com">http://www.yanzhenjie.com</a><br>
The author's blog: <a href="http://blog.csdn.net/yanzhenjie1003">http://blog.csdn.net/yanzhenjie1003</a>  </p>

<hr>

<h1>
<a id="nohttp-home-page-and-doc-url" class="anchor" href="#nohttp-home-page-and-doc-url" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NoHttp home page and doc url</h1>

<p>NoHttp home page: <a href="http://www.nohttp.net">http://www.nohttp.net</a><br>
NoHttp document: <a href="http://doc.nohttp.net">http://doc.nohttp.net</a><br>
NoHttp source code: <a href="https://github.com/yanzhenjie/NoHttp/">https://github.com/yanzhenjie/NoHttp</a><br>
Document also continues to improve, there is a problem can send <a href="https://github.com/yanzhenjie/NoHttp/issues">issues</a>, or send an email to me directly: <a href="mailto:smallajax@foxmail.com">smallajax@foxmail.com</a>.</p>

<h1>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to use</h1>

<ul>
<li>
<p>Eclipse use <a href="https://github.com/yanzhenjie/NoHttp/blob/master/Jar/nohttp1.0.4.jar?raw=true">NoHttp Jar</a>, if need to rely on the source code, <a href="https://codeload.github.com/yanzhenjie/NoHttp/zip/1.0.4">download</a>.</p>

<blockquote>
<p><a href="https://github.com/yanzhenjie/NoHttp/blob/master/Jar/nohttp1.0.4-include-source.jar?raw=true">download jar [include source code，274k]</a><br>
<a href="https://github.com/yanzhenjie/NoHttp/blob/master/Jar/nohttp1.0.4.jar?raw=true">download jar [not include source code，147k]</a>  </p>
</blockquote>
</li>
<li><p>AndroidStudio using Gradle build add dependent (recommended)</p></li>
</ul>

<div class="highlight highlight-source-groovy"><pre>compile <span class="pl-s"><span class="pl-pds">'</span>com.yolanda.nohttp:nohttp:1.0.4<span class="pl-pds">'</span></span></pre></div>

<h1>
<a id="download-demo" class="anchor" href="#download-demo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Download Demo</h1>

<p><a href="https://codeload.github.com/yanzhenjie/NoHttp/zip/1.0.4">Downloa source code of NoHttp, Demo</a><br>
<a href="https://github.com/yanzhenjie/NoHttp/blob/master/nohttp_sample.apk?raw=true">Download Demo APK</a>  </p>

<h1>
<a id="permission" class="anchor" href="#permission" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Permission</h1>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">uses-permission</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>android.permission.READ_EXTERNAL_STORAGE<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">uses-permission</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">uses-permission</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>android.permission.INTERNET<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">uses-permission</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>android.permission.ACCESS_NETWORK_STATE<span class="pl-pds">"</span></span> /&gt;
&lt;<span class="pl-ent">uses-permission</span> <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>android.permission.ACCESS_WIFI_STATE<span class="pl-pds">"</span></span> /&gt;</pre></div>

<h1>
<a id="nohttp-features" class="anchor" href="#nohttp-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NoHttp features</h1>

<p>NoHttp implements Http1.1 (<a href="http://www.ietf.org/rfc/rfc2616.txt">RFC2616</a>), a standard Http framework.</p>

<ul>
<li>Request and download queue, average distribution of each thread resources, support for multiple requests concurrently.</li>
<li>Support the GET, POST, PUT, PATCH, HEAD, DELETE, OPTIONS, such as TRACE request protocol.</li>
<li>Support for POST, PUT, PATCH, DELETE the file upload (Html form principle).</li>
<li>File download, upload, download, upload and download the progress of the callback, error correction.</li>
<li>Provides five kinds of data caching policy for developers to choose to use (see below) in detail.</li>
<li>Support to cancel a request, specify multiple request cancel, cancel all requests.</li>
<li>Support custom Request, using NoHttp generics can be parsed into any data you want to format (String, Json, JavaBean, etc.).</li>
<li>Automatic maintenance of support Session, cookies, restart the App, turn off the boot after also continue to maintain.</li>
<li>Support Https, self-signed website Https access, support two-way authentication.</li>
</ul>

<h2>
<a id="friendly-debug-mode" class="anchor" href="#friendly-debug-mode" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Friendly debug mode</h2>

<p>NoHttp provides a debug mode, after open the can see clear request process, such as how to transfer data, basic need not caught. Can see that the request headers, request data, the process of response headers, cookies, etc. You don't have to worry about too many Log will dazzle you, clean and tidy.</p>

<h2>
<a id="request" class="anchor" href="#request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Request</h2>

<blockquote>
<ul>
<li>Support the request String, Json, FastJson, Gson, Bitmap, javabeans and XML extensions.</li>
<li>An asynchronous request, get the results directly to update the UI, support synchronous request.</li>
</ul>
</blockquote>

<h2>
<a id="multiple-file-upload" class="anchor" href="#multiple-file-upload" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Multiple file upload</h2>

<p>All download progress callback, error correction and other friendly interface.</p>

<blockquote>
<ul>
<li>Large file upload, OOM will not occur.</li>
<li>File upload more, multiple key file, a key multiple files（<code>List&lt;File&gt;</code>）.</li>
<li>Support File, InputStream, ByteArray containing, Bitmap, realize NoHttp Binary interface, anything can theoretically.</li>
<li>Support to cancel the upload.</li>
</ul>
</blockquote>

<h2>
<a id="file-download" class="anchor" href="#file-download" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>File download</h2>

<blockquote>
<ul>
<li>File to download, support for multiple files to download at the same time, and a progress callback, error correction and so on.</li>
<li>Support for a moratorium on continue to download, support to cancel the download, support breakpoint continuingly.</li>
<li>To make use of much NoHttp file download can do a download manager.</li>
</ul>
</blockquote>

<h2>
<a id="cache-mode" class="anchor" href="#cache-mode" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cache mode</h2>

<blockquote>
<ul>
<li>Only request network.</li>
<li>Only read cache.</li>
<li>The standard Http protocol cache (such as in the case of the response code is 304), need server support, if the server does not support the same way as a common request.</li>
<li>First request network, after failing to return to the cache.</li>
<li>First read the cache, the cache request network again.</li>
</ul>
</blockquote>

<h2>
<a id="cancel-request" class="anchor" href="#cancel-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cancel Request</h2>

<p>All cancelled all support requests are being executed.</p>

<blockquote>
<ul>
<li>Support cancel a request。</li>
<li>Support to cancel with sign to specify several requests。</li>
<li>Support cancel all request。</li>
</ul>
</blockquote>

<h2>
<a id="automatically-maintain-cookie" class="anchor" href="#automatically-maintain-cookie" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Automatically maintain Cookie</h2>

<blockquote>
<ul>
<li>Maintain support Session, cookies, temporary cookies.</li>
<li>Support the App after the restart, shutdown boot continue to persistent.</li>
<li>Provides the interface that allows developers to monitor the change of the cookies, can also change the value of a Cookie.</li>
</ul>
</blockquote>

<h2>
<a id="redirect" class="anchor" href="#redirect" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Redirect</h2>

<blockquote>
<ul>
<li>For Http301, 302, 303, 307 redirect support.</li>
<li>Support multiple redirection nesting.</li>
<li>Support disable redirection, NoHttp provides redirection interface operation.</li>
</ul>
</blockquote>

<h2>
<a id="proxy" class="anchor" href="#proxy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Proxy</h2>

<blockquote>
<ul>
<li>The standard Java Api, the ProXy: the designated agent of IP and Port.</li>
<li>Such as agent to your computer for caught when debugging, such as use proxy to access Google.</li>
</ul>
</blockquote>

<h1>
<a id="1-request" class="anchor" href="#1-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1. Request</h1>

<h2>
<a id="string-request" class="anchor" href="#string-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>String request</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// String request object</span>
<span class="pl-k">Request&lt;<span class="pl-smi">String</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createStringRequest(url, requestMethod);
</pre></div>

<h2>
<a id="json-request" class="anchor" href="#json-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Json request</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// JsonObject</span>
<span class="pl-k">Request&lt;<span class="pl-smi">JSONObject</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createJsonObjectRequest(url, reqeustMethod);
<span class="pl-c1">...</span>
<span class="pl-c">// JsonArray</span>
<span class="pl-k">Request&lt;<span class="pl-smi">JSONArray</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createJsonArrayRequest(url, reqeustMethod);</pre></div>

<h2>
<a id="bitmap-request" class="anchor" href="#bitmap-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bitmap request</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">Bitmap</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createImageRequest(url, requestMethod);</pre></div>

<h2>
<a id="add-params" class="anchor" href="#add-params" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Add params</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">JSONObject</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-c1">...</span>
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>yoldada<span class="pl-pds">"</span></span>);<span class="pl-c">// String type</span>
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-c1">18</span>);<span class="pl-c">// int type</span>
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>sex<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">'</span>0<span class="pl-pds">'</span></span>)<span class="pl-c">// char type</span>
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>time<span class="pl-pds">"</span></span>, <span class="pl-c1">16346468473154</span>); <span class="pl-c">// long type</span>
<span class="pl-c1">...</span></pre></div>

<h2>
<a id="add-to-queue" class="anchor" href="#add-to-queue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Add to queue</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">RequestQueue</span> requestQueue <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>newRequestQueue();
<span class="pl-c">// Or a concurrent value, allowing three concurrent requests at the same time</span>
<span class="pl-c">// RequestQueue requestQueue = NoHttp.newRequestQueue(3);</span>

<span class="pl-c">// start request</span>
requestQueue<span class="pl-k">.</span>add(what, request, responseListener);</pre></div>

<p>　　Added to the queue above there is a credit, the credit will be <code>responseLisetener</code> response callback to developers，so we can use a <code>responseLisetener</code> accept multiple requests the response，with what to distinguish results. Instead, like some framework, each request to the new a callback.</p>

<h2>
<a id="synchronous-request" class="anchor" href="#synchronous-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Synchronous request</h2>

<p>　　In request, the current thread by the thread so used.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">String</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-c1">...</span>
<span class="pl-k">Response&lt;<span class="pl-smi">String</span>&gt;</span> response <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>startRequestSync(request);
<span class="pl-k">if</span> (response<span class="pl-k">.</span>isSucceed()) {
    <span class="pl-c">// succeed</span>
} <span class="pl-k">else</span> {
    <span class="pl-c">// failed</span>
}</pre></div>

<h1>
<a id="2-file-upload" class="anchor" href="#2-file-upload" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. File upload</h1>

<p>　　Support for multiple File upload, multiple key multiple files, a key multiple files (<code>List &lt; File &gt;</code>). Support File, InputStream, ByteArray containing, Bitmap, realize NoHttp Binary interface, anything can theoretically.</p>

<h2>
<a id="a-single-file" class="anchor" href="#a-single-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>A single file</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">String</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-c1">...</span>
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>file<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">FileBinary</span>(file));</pre></div>

<h2>
<a id="upload-multiple-files-multiple-key-file-form" class="anchor" href="#upload-multiple-files-multiple-key-file-form" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Upload multiple files, multiple Key file form</h2>

<p>　　Here you can add all kinds of files，File、Bitmap、InputStream、ByteArray：</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">String</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-c1">...</span>
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>file1<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">FileBinary</span>(<span class="pl-smi">File</span>));
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>file2<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">FileBinary</span>(<span class="pl-smi">File</span>));
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>file3<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">InputStreamBinary</span>(<span class="pl-smi">InputStream</span>));
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>file4<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">ByteArrayBinary</span>(<span class="pl-k">byte</span>[]));
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>file5<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">BitmapStreamBinary</span>(<span class="pl-smi">Bitmap</span>));</pre></div>

<h2>
<a id="upload-multiple-files-a-key-form-of-multiple-files" class="anchor" href="#upload-multiple-files-a-key-form-of-multiple-files" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Upload multiple files, a Key form of multiple files</h2>

<p>　　With the same key to add,  the same key will not be covered.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">String</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-c1">...</span>
fileList<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>image<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">FileBinary</span>(<span class="pl-smi">File</span>));
fileList<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>image<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">InputStreamBinary</span>(<span class="pl-smi">InputStream</span>));
fileList<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>image<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">ByteArrayBinary</span>(<span class="pl-k">byte</span>[]));
fileList<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>image<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-smi">BitmapStreamBinary</span>(<span class="pl-smi">Bitmap</span>));</pre></div>

<p>　Or: </p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">String</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-c1">...</span>

<span class="pl-k">List&lt;<span class="pl-smi">Binary</span>&gt;</span> fileList <span class="pl-k">=</span> <span class="pl-c1">...</span>
fileList<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">FileBinary</span>(<span class="pl-smi">File</span>));
fileList<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">InputStreamBinary</span>(<span class="pl-smi">InputStream</span>));
fileList<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">ByteArrayBinary</span>(<span class="pl-k">byte</span>[]));
fileList<span class="pl-k">.</span>add(<span class="pl-k">new</span> <span class="pl-smi">BitmapStreamBinary</span>(<span class="pl-smi">Bitmap</span>));
request<span class="pl-k">.</span>add(<span class="pl-s"><span class="pl-pds">"</span>file_list<span class="pl-pds">"</span></span>, fileList);</pre></div>

<h1>
<a id="3-download-file" class="anchor" href="#3-download-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>3. Download file</h1>

<p>　　Because the downloaded file code is more, post key part, specific please refer to the sample.</p>

<h2>
<a id="request-a-download" class="anchor" href="#request-a-download" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Request a download</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// download file</span>
downloadRequest <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createDownloadRequest<span class="pl-k">.</span><span class="pl-c1">..</span>
<span class="pl-c">// what To distinguish the download.</span>
<span class="pl-c">// downloadRequest To download the request object.</span>
<span class="pl-c">// downloadListener Listeningof download.</span>
downloadQueue<span class="pl-k">.</span>add(<span class="pl-c1">0</span>, downloadRequest, downloadListener);</pre></div>

<h2>
<a id="pause-or-stop-the-download" class="anchor" href="#pause-or-stop-the-download" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pause or stop the download</h2>

<div class="highlight highlight-source-java"><pre>downloadRequest<span class="pl-k">.</span>cancel();</pre></div>

<h2>
<a id="listening-to-the-download-process" class="anchor" href="#listening-to-the-download-process" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Listening to the download process</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-k">private</span> <span class="pl-smi">DownloadListener</span> downloadListener <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">DownloadListener</span>() {
    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onStart</span>(<span class="pl-k">int</span> <span class="pl-v">what</span>, <span class="pl-k">boolean</span> <span class="pl-v">resume</span>, <span class="pl-k">long</span> <span class="pl-v">preLenght</span>, <span class="pl-smi">Headers</span> <span class="pl-v">header</span>, <span class="pl-k">long</span> <span class="pl-v">count</span>) {
        <span class="pl-c">// download start.</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onProgress</span>(<span class="pl-k">int</span> <span class="pl-v">what</span>, <span class="pl-k">int</span> <span class="pl-v">progress</span>, <span class="pl-k">long</span> <span class="pl-v">downCount</span>) {
        <span class="pl-c">// update download progress.</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onFinish</span>(<span class="pl-k">int</span> <span class="pl-v">what</span>, <span class="pl-smi">String</span> <span class="pl-v">filePath</span>) {
        <span class="pl-c">// download finish.</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onDownloadError</span>(<span class="pl-k">int</span> <span class="pl-v">what</span>, <span class="pl-smi">StatusCode</span> <span class="pl-v">code</span>, <span class="pl-smi">CharSequence</span> <span class="pl-v">message</span>) {
        <span class="pl-c">// download have a error.</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onCancel</span>(<span class="pl-k">int</span> <span class="pl-v">what</span>) {
        <span class="pl-c">// Download has been cancelled or suspended.</span>
    }
};</pre></div>

<p>;</p>

<h1>
<a id="4-cache-mode" class="anchor" href="#4-cache-mode" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4. Cache mode</h1>

<h2>
<a id="1-cache-http-standard-protocols-such-as-when-the-response-code-is-304redirect" class="anchor" href="#1-cache-http-standard-protocols-such-as-when-the-response-code-is-304redirect" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1. Cache Http standard protocols, such as when the response code is 304(redirect)</h2>

<p>　　Is realized RFC2616 NoHttp itself, so there need not set or set to DEFAULT.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">JSONObject</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createJsonObjectRequest(url);
request<span class="pl-k">.</span>setCacheMode(<span class="pl-smi">CacheMode</span><span class="pl-c1"><span class="pl-k">.</span>DEFAULT</span>);</pre></div>

<h2>
<a id="2-when-the-request-network-failure-and-then-read-the-cache" class="anchor" href="#2-when-the-request-network-failure-and-then-read-the-cache" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. When the request network failure, and then read the cache</h2>

<p>　　Request to the server success is returned data server, if the request to the server fails, read the cache data to return.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">JSONObject</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createJsonObjectRequest(url);
request<span class="pl-k">.</span>setCacheMode(<span class="pl-smi">CacheMode</span><span class="pl-c1"><span class="pl-k">.</span>REQUEST_NETWORK_FAILED_READ_CACHE</span>);</pre></div>

<h2>
<a id="3-to-read-the-first-cache-there-is-no-cache-request-to-the-server-again" class="anchor" href="#3-to-read-the-first-cache-there-is-no-cache-request-to-the-server-again" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>3. To read the first cache, there is no cache request to the server again</h2>

<p>　　We know that the core of the ImageLoader besides memory optimization, one is found that the mainland has left image is used directly, without the request to the server, so do a ImageLoader NoHttp this very use.
　　If there is no cache request to the server, or use the cache:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">JSONObject</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createJsonObjectRequest(url);
<span class="pl-c">// Change the caching pattern to IF_NONE_CACHE_REQUEST_NETWORK.</span>
request<span class="pl-k">.</span>setCacheMode(<span class="pl-smi">CacheMode</span><span class="pl-c1"><span class="pl-k">.</span>IF_NONE_CACHE_REQUEST_NETWORK</span>);</pre></div>

<p>　　Request pictures, cache the image:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">Bitmap</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createImageRequest(imageUrl);
request<span class="pl-k">.</span>setCacheMode(<span class="pl-smi">CacheMode</span><span class="pl-c1"><span class="pl-k">.</span>IF_NONE_CACHE_REQUEST_NETWORK</span>);</pre></div>

<h2>
<a id="4-only-request-network" class="anchor" href="#4-only-request-network" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4. Only request network</h2>

<p>　　Here can't read the cache, can't use Http304:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">Bitmap</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createImageRequest(imageUrl);
request<span class="pl-k">.</span>setCacheMode(<span class="pl-smi">CacheMode</span><span class="pl-c1"><span class="pl-k">.</span>ONLY_REQUEST_NETWORK</span>);
<span class="pl-c1">...</span></pre></div>

<h2>
<a id="5-only-read-cache" class="anchor" href="#5-only-read-cache" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>5. Only read cache</h2>

<p>　　Just read the cache, not request network and other operation:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">Bitmap</span>&gt;</span> request <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>createImageRequest(imageUrl);
request<span class="pl-k">.</span>setCacheMode(<span class="pl-smi">CacheMode</span><span class="pl-c1"><span class="pl-k">.</span>ONLY_READ_CACHE</span>);</pre></div>

<h1>
<a id="5-cancel-request" class="anchor" href="#5-cancel-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>5. Cancel request</h1>

<h2>
<a id="cancel-a-single-request" class="anchor" href="#cancel-a-single-request" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cancel a single request</h2>

<p>　　User method <code>cancel()</code> of request.</p>

<div class="highlight highlight-source-java"><pre>request<span class="pl-k">.</span>cancel();</pre></div>

<h2>
<a id="cancel-the-specified-request-from-the-queue" class="anchor" href="#cancel-the-specified-request-from-the-queue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cancel the specified request from the queue</h2>

<p>　　To the request set a sign, to cancel the call queue cancelBySign can cancel all specify the sign of the request.</p>

<div class="highlight highlight-source-java"><pre>request<span class="pl-k">.</span>setCancelSign(sign);
<span class="pl-c1">...</span>
queue<span class="pl-k">.</span>cancelBySign(sign);</pre></div>

<h2>
<a id="cancel-all-requests-in-the-queue" class="anchor" href="#cancel-all-requests-in-the-queue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cancel all requests in the queue</h2>

<div class="highlight highlight-source-java"><pre>queue<span class="pl-k">.</span>cancelAll();</pre></div>

<h2>
<a id="stop-queue" class="anchor" href="#stop-queue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Stop queue</h2>

<p>　　After add the request to the queue in the queue to stop, the request will not be executed.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">RequestQueue</span> queue <span class="pl-k">=</span> <span class="pl-smi">NoHttp</span><span class="pl-k">.</span>newRequestQueue();
<span class="pl-c1">...</span>
queue<span class="pl-k">.</span>stop();</pre></div>

<h1>
<a id="6-the-custom-request-type-fastjsonrequest" class="anchor" href="#6-the-custom-request-type-fastjsonrequest" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>6. The custom request type: FastJsonRequest</h1>

<h2>
<a id="define-the-request-object" class="anchor" href="#define-the-request-object" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Define the request object</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">FastJsonRequest</span> <span class="pl-k">extends</span> <span class="pl-e">RestRequestor&lt;<span class="pl-smi">JSONObject</span>&gt;</span> {

    <span class="pl-k">public</span> <span class="pl-en">FastJsonRequest</span>(<span class="pl-smi">String</span> <span class="pl-v">url</span>) {
        <span class="pl-v">super</span>(url);
    }

    <span class="pl-k">public</span> <span class="pl-en">FastJsonRequest</span>(<span class="pl-smi">String</span> <span class="pl-v">url</span>, <span class="pl-smi">RequestMethod</span> <span class="pl-v">requestMethod</span>) {
        <span class="pl-v">super</span>(url, requestMethod);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">JSONObject</span> <span class="pl-en">parseResponse</span>(<span class="pl-smi">String</span> <span class="pl-v">url</span>, <span class="pl-smi">Headers</span> <span class="pl-v">headers</span>, <span class="pl-k">byte</span>[] <span class="pl-v">responseBody</span>) {
        <span class="pl-smi">String</span> result <span class="pl-k">=</span> <span class="pl-smi">StringRequest</span><span class="pl-k">.</span>parseResponseString(url, headers, responseBody);
        <span class="pl-smi">JSONObject</span> jsonObject <span class="pl-k">=</span> <span class="pl-c1">null</span>;
        <span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">TextUtils</span><span class="pl-k">.</span>isEmpty(result)) {
            jsonObject <span class="pl-k">=</span> <span class="pl-c1">JSON</span><span class="pl-k">.</span>parseObject(result);
        } <span class="pl-k">else</span> {
            jsonObject <span class="pl-k">=</span> <span class="pl-c1">JSON</span><span class="pl-k">.</span>toJSON(<span class="pl-s"><span class="pl-pds">"</span>{}<span class="pl-pds">"</span></span>);
        }
        <span class="pl-k">return</span> jsonObject;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getAccept</span>() {
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>application/json<span class="pl-pds">"</span></span>;
    }
}</pre></div>

<h2>
<a id="using-a-custom-request-and-nohttp-default-no-difference" class="anchor" href="#using-a-custom-request-and-nohttp-default-no-difference" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using a custom request and NoHttp default no difference</h2>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Request&lt;<span class="pl-smi">JSONObject</span>&gt;</span> mRequest <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">FastJsonRequest</span>(url, requestMethod);
queue<span class="pl-k">.</span>add(what, mRequest, responseListener);</pre></div>

<h1>
<a id="7-proguard" class="anchor" href="#7-proguard" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>7. Proguard</h1>

<h2>
<a id="need-to-know" class="anchor" href="#need-to-know" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Need to know</h2>

<pre><code>NoHttp All classes can be confusing.
</code></pre>

<p>　　NoHttp1.0.0 Using the leve23 API, so have to use leve23 packaging.
　　NoHttp1.0.1 and higher using the reflection calls the high-level or low-level apis, so as long as it is more than leve9 SDK can be compiled.</p>

<h2>
<a id="if-you-dont-want-to-keep" class="anchor" href="#if-you-dont-want-to-keep" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>If you don't want to keep</h2>

<pre lang="text"><code>-dontwarn com.yolanda.nohttp.**
-keep class com.yolanda.nohttp.**{*;}
</code></pre>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h1>

<pre lang="text"><code>Copyright 2016 Yan Zhenjie

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/yanzhenjie/NoHttp">Nohttp</a> is maintained by <a href="https://github.com/yanzhenjie">yanzhenjie</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
